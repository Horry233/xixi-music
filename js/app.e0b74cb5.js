(function(t){function e(e){for(var i,s,o=e[0],a=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);d&&d(e);while(h.length)h.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],i=!0,s=1;s<n.length;s++){var o=n[s];0!==r[o]&&(i=!1)}i&&(c.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},r={app:0},c=[];function o(t){return a.p+"js/"+({}[t]||t)+"."+{"chunk-007026d1":"82726780","chunk-0cedad30":"e678cc0d","chunk-0fc8b986":"49daec09","chunk-1fc65073":"9604b546","chunk-26d56c53":"48e73ab1","chunk-31efb0a7":"4c8bbce0","chunk-48c30067":"cfcfd1be","chunk-50f4847d":"5b277dda","chunk-67e3a02c":"08744b09","chunk-832019e8":"6adbb9ec","chunk-9a08225a":"064e0896","chunk-9f2101fc":"7e3247df","chunk-c6f7861e":"0a5726bc","chunk-dc5fb71c":"779b8c18","chunk-ff0ae78a":"4698a0b9"}[t]+".js"}function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n={"chunk-007026d1":1,"chunk-0cedad30":1,"chunk-0fc8b986":1,"chunk-1fc65073":1,"chunk-26d56c53":1,"chunk-31efb0a7":1,"chunk-48c30067":1,"chunk-50f4847d":1,"chunk-67e3a02c":1,"chunk-832019e8":1,"chunk-9a08225a":1,"chunk-9f2101fc":1,"chunk-c6f7861e":1,"chunk-dc5fb71c":1,"chunk-ff0ae78a":1};s[t]?e.push(s[t]):0!==s[t]&&n[t]&&e.push(s[t]=new Promise((function(e,n){for(var i="css/"+({}[t]||t)+"."+{"chunk-007026d1":"f80100aa","chunk-0cedad30":"a5a07052","chunk-0fc8b986":"a9a57262","chunk-1fc65073":"3b977c5d","chunk-26d56c53":"5d1b9a73","chunk-31efb0a7":"26523e5d","chunk-48c30067":"2764e16c","chunk-50f4847d":"761b91c4","chunk-67e3a02c":"23a5bb2c","chunk-832019e8":"c482f385","chunk-9a08225a":"a70717b8","chunk-9f2101fc":"b13d1623","chunk-c6f7861e":"211453d6","chunk-dc5fb71c":"8532cc69","chunk-ff0ae78a":"e294afcf"}[t]+".css",r=a.p+i,c=document.getElementsByTagName("link"),o=0;o<c.length;o++){var l=c[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===i||u===r))return e()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){l=h[o],u=l.getAttribute("data-href");if(u===i||u===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var i=e&&e.target&&e.target.src||r,c=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=i,delete s[t],d.parentNode.removeChild(d),n(c)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){s[t]=0})));var i=r[t];if(0!==i)if(i)e.push(i[2]);else{var c=new Promise((function(e,n){i=r[t]=[e,n]}));e.push(i[2]=c);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=o(t);var h=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(d);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",h.name="ChunkLoadError",h.type=i,h.request=s,n[1](h)}r[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var d=u;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0566":function(t,e,n){"use strict";var i=n("c2ea"),s=n.n(i);s.a},"113c":function(t,e,n){t.exports=n.p+"img/default.1eb859f7.png"},2165:function(t,e,n){"use strict";var i=n("4f8b"),s=n.n(i);s.a},"2a8b":function(t,e,n){},"2c1c":function(t,e,n){},"3ce5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",staticClass:"wrapper"},[t._t("default")],2)},s=[],r=(n("a9e3"),n("1fba")),c={props:{probeType:{type:Number,default:1},listenScroll:{type:Boolean,default:!1},list:{type:Array,required:null},click:{type:Boolean,default:!0},pullUp:{type:Boolean,default:!1}},methods:{initScroll:function(){var t=this;if(this.scroll=new r["a"](this.$refs.wrapper,{probeType:this.probeType,click:this.click,scrollX:!0}),this.listenScroll){var e=this;this.scroll.on("scroll",(function(t){e.$emit("scroll",t)}))}this.pullUp&&this.scroll.on("scrollEnd",(function(){t.scroll.y<=t.scroll.maxScrollY+50&&t.$emit("scrollToEnd")}))},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)}},watch:{list:function(){var t=this;this.$nextTick((function(){t.refresh()}))}},mounted:function(){this.initScroll()}},o=c,a=n("2877"),l=Object(a["a"])(o,i,s,!1,null,null,null);e["a"]=l.exports},"4f8b":function(t,e,n){},"510f":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a}));n("c740"),n("4160"),n("a434"),n("159b");var i=n("5530"),s=n("2f62"),r={computed:Object(i["a"])({},Object(s["b"])({playList:"playList"})),mounted:function(){this.handlePlaylist(this.playList)},activated:function(){this.handlePlaylist(this.playList)},watch:{playList:function(t){this.handlePlaylist(t)}},methods:{handlePlaylist:function(){throw new Error("component must  implement handlePlay methods")}}},c={computed:Object(i["a"])({},Object(s["b"])({loveMusic:"loveMusic",currentSong:"currentSong"})),methods:{toggleFavorite:function(t){var e=this.isFavorite(t);e>-1?this.loveMusic.splice(e,1):this.loveMusic.unshift(t),localStorage.setItem("loveMusic",JSON.stringify(this.loveMusic))},getFavoriteIcon:function(t){var e=this.isFavorite(t);return e>-1?"icon-favorite":"icon-not-favorite"},isFavorite:function(t){var e=this.loveMusic.findIndex((function(e){return e.mid===t.mid}));return e},local:function(t,e){var n=this;t.forEach((function(e,i){e.mid===n.currentSong.mid&&t.splice(i,1)})),t.unshift(this.currentSong),localStorage.setItem(e,JSON.stringify(t))},resetCurrentIndex:function(t){var e=this,n=t.findIndex((function(t){return t.mid===e.currentSong.mid}));this.$store.commit("setCurrentIndex",n)}}},o={computed:Object(i["a"])({},Object(s["b"])({loveSinger:"loveSinger"})),methods:{toggleFavorite:function(t){var e=this.isFavorite(t);e>-1?this.loveSinger.splice(e,1):this.loveSinger.unshift(t),localStorage.setItem("loveSinger",JSON.stringify(this.loveSinger))},getFavoriteText:function(t){var e=this.isFavorite(t);return e>-1?"已关注":"关注"},isFavorite:function(t){var e=this.loveSinger.findIndex((function(e){return e.singer_id===t.singer_id}));return e}}},a={computed:Object(i["a"])({},Object(s["b"])({value:"value",loveSongList:"loveSongList",loveAlbum:"loveAlbum",loveRank:"loveRank",loveSinger:"loveSinger",songList:"songList",album:"album",rank:"rank",singer:"singer"})),methods:{toggleFavorite:function(){var t,e,n,i=this.isFavorite(),s=this.value;"歌单"==s&&(t=this.loveSongList,e=this.songList,n="loveSongList"),"歌手"==s&&(t=this.loveSinger,e=this.singer,n="loveSinger"),"排行"==s&&(t=this.loveRank,e=this.rank,n="loveRank"),"专辑"==s&&(t=this.loveAlbum,e=this.album,n="loveAlbum"),i>-1?t.splice(i,1):t.unshift(e),localStorage.setItem(n,JSON.stringify(t))},getFavoriteIcon:function(){var t=this.isFavorite();return t>-1?"icon-favorite":"icon-not-favorite"},isFavorite:function(){var t,e=this;return"歌单"==this.value?(t=this.loveSongList.findIndex((function(t){return t.content_id===e.songList.content_id})),t):"排行"==this.value?(t=this.loveRank.findIndex((function(t){return t.topId===e.rank.topId})),t):"专辑"==this.value?(t=this.loveAlbum.findIndex((function(t){return t.albumMID===e.album.albumMID})),t):"歌手"==this.value?(t=this.loveSinger.findIndex((function(t){return t.singer_id===e.singer.singer_id})),t):void 0}}}},"53b9":function(t,e,n){"use strict";var i=n("2a8b"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("m-header"),n("tab",{attrs:{tabList:t.tabList}}),n("keep-alive",[n("router-view")],1),n("player"),n("operator-song")],1)},r=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-header"},[n("router-link",{staticClass:"mine",attrs:{tag:"div",to:"/mine"}},[n("i",{staticClass:"icon-mine"})]),n("h1",{staticClass:"text"},[t._v("XIXI Music")]),n("router-link",{staticClass:"search",attrs:{tag:"div",to:"/search"}},[n("i",{staticClass:"icon-search"})])],1)},o=[],a=(n("c0cd"),n("2877")),l={},u=Object(a["a"])(l,c,o,!1,null,"07178624",null),h=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab"},t._l(t.tabList,(function(e){return n("router-link",{key:e.id,staticClass:"tab-item",attrs:{tag:"div",to:e.router}},[n("span",{staticClass:"tab-link"},[t._v(t._s(e.name))])])})),1)},f=[],p={props:{tabList:{type:Array,required:!0}}},m=p,g=(n("adc4"),Object(a["a"])(m,d,f,!1,null,"73bff54e",null)),v=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.playList.length>=1,expression:"playList.length >= 1"}],staticClass:"player"},[n("transition",{attrs:{name:"normal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreen,expression:"fullScreen"}],staticClass:"normal-player"},[n("div",{staticClass:"background"},[n("img",{attrs:{width:"100%",height:"100%",src:t.imgsrc}})]),n("div",{staticClass:"top"},[n("div",{staticClass:"back",on:{click:function(e){return t.back(!1)}}},[n("i",{staticClass:"icon-back"})]),n("h1",{staticClass:"title",domProps:{innerHTML:t._s(t.currentSong.name)}}),n("h2",{staticClass:"subtitle"},t._l(t.currentSong.singer,(function(e){return n("span",{key:e.id},[t._v(t._s(e.name))])})),0)]),n("div",{staticClass:"middle",on:{touchstart:function(e){return e.preventDefault(),t.middleTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.middleTouchMove(e)},touchend:t.middleTouchEnd}},[n("div",{ref:"middleL",staticClass:"middle-l"},[n("div",{ref:"cdWrapper",staticClass:"cd-wrapper"},[n("div",{staticClass:"cd"},[n("img",{staticClass:"image",class:t.rorate,attrs:{src:t.imgsrc}})])]),n("div",{staticClass:"playing-lyric-wrapper"},[n("div",{staticClass:"playing-lyric"},[t._v(t._s(t.playingLyric))])])]),n("scroll",{ref:"lyricList",staticClass:"middle-r",attrs:{list:t.currentLyric&&t.currentLyric.lines}},[n("div",{staticClass:"lyric-wrapper"},[t.currentLyric?n("div",[t._l(t.currentLyric.lines,(function(e,i){return n("p",{key:i,ref:"lyricLine",refInFor:!0,staticClass:"text",class:{current:t.currentLineNum===i}},[t._v(" "+t._s(e.txt)+" ")])})),n("p",{directives:[{name:"show",rawName:"v-show",value:0===t.currentLyric.lines.length,expression:"currentLyric.lines.length === 0"}],staticClass:"nolyric"},[t._v(" 该歌曲暂无歌词 ")])],2):t._e()])])],1),n("div",{staticClass:"bottom"},[n("div",{staticClass:"dot-wrapper"},[n("span",{staticClass:"dot",class:{active:"cd"===t.currentShow}}),n("span",{staticClass:"dot",class:{active:"lyric"===t.currentShow}})]),n("div",{staticClass:"progress-wrapper"},[n("span",{staticClass:"time time-l"},[t._v(t._s(t.forMat(t.currentTime)))]),n("div",{staticClass:"progress-bar-wrapper"},[n("progress-bar",{attrs:{precent:t.precent},on:{precentChange:t.precentChange}})],1),n("span",{staticClass:"time time-r"},[t._v(t._s(t.forMat(t.currentSong.interval)))])]),n("div",{staticClass:"operators"},[n("div",{staticClass:"icon icon-l",on:{click:t.changeMode}},[n("i",{class:t.iconMode})]),n("div",{staticClass:"icon icon-l",on:{click:function(e){return t.changeIndex(-1)}}},[n("i",{staticClass:"icon-prev"})]),n("div",{staticClass:"icon icon-center",class:t.disabledCls,on:{click:t.changePlaying}},[n("i",{class:t.playIcon})]),n("div",{staticClass:"icon icon-r",on:{click:function(e){return t.changeIndex(1)}}},[n("i",{staticClass:"icon-next"})]),n("div",{staticClass:"icon icon-r",on:{click:function(e){return t.toggleFavorite(t.currentSong)}}},[n("i",{class:t.getFavoriteIcon(t.currentSong)})])])]),n("Toast",{directives:[{name:"show",rawName:"v-show",value:void 0==t.audioSrc,expression:"audioSrc == undefined"}],attrs:{title:"抱歉！该歌曲暂无播放地址"}})],1)]),n("transition",{attrs:{name:"mini"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullScreen&&void 0!=t.currentSong,expression:"!fullScreen && currentSong !=  undefined"}],staticClass:"mini-player",on:{click:function(e){return t.back(!0)}}},[n("div",{staticClass:"icon"},[n("img",{class:t.rorate,attrs:{width:"40",height:"40",src:t.imgsrc}})]),n("div",{staticClass:"text"},[n("h2",{staticClass:"name",domProps:{innerHTML:t._s(t.currentSong.name)}}),n("p",{staticClass:"desc"},t._l(t.currentSong.singer,(function(e){return n("span",{key:e.id},[t._v(t._s(e.name))])})),0)]),n("div",{staticClass:"control",on:{click:function(e){return e.stopPropagation(),t.changePlaying(e)}}},[n("i",{class:t.miniIcon})]),n("div",{staticClass:"control"},[n("i",{staticClass:"icon-playlist",on:{click:function(e){return e.stopPropagation(),t.showPlaylist(e)}}})])])]),n("audio",{ref:"audio",attrs:{src:t.audioSrc},on:{canplay:t.ready,error:t.error,timeupdate:t.updateTime,ended:t.end}}),n("play-list",{ref:"playList",on:{changeMode:t.changeMode}})],1)},b=[],k=(n("99af"),n("96cf"),n("1da1")),S=n("5530"),L=n("2f62"),C=n("3c75"),w=n.n(C),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-bar"},[n("div",{ref:"inner",staticClass:"inner",on:{click:t.progressClick}},[n("div",{ref:"progress",staticClass:"progress"}),n("div",{ref:"btn",staticClass:"btn",on:{touchstart:function(e){return e.preventDefault(),t.progressTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.progressTouchMove(e)},touchend:t.progressTouchEnd}})])])},_=[],I=(n("a9e3"),{data:function(){return{touchStatus:!1,newPrecent:0}},props:{precent:{type:Number,default:0}},computed:{innerWidth:function(){return this.$refs.inner.clientWidth},rect:function(){return this.$refs.inner.getBoundingClientRect().left}},methods:{offset:function(t){var e=this.innerWidth*t,n=(this.innerWidth-16)*t;this.$refs.progress.style.width="".concat(e,"px"),this.$refs.btn.style.left="".concat(n,"px")},triggerPercent:function(){var t=this.$refs.progress.clientWidth/this.innerWidth;this.$emit("precentChange",t)},progressTouchStart:function(){this.touchStatus=!0},progressTouchMove:function(t){if(this.touchStatus){var e=t.touches[0].clientX-this.rect;e>this.innerWidth&&(e=this.innerWidth),e<0&&(e=0),this.newPrecent=e/this.innerWidth,this.offset(this.newPrecent)}},progressTouchEnd:function(){this.touchStatus=!1,this.triggerPercent()},progressClick:function(t){var e=t.pageX-this.rect,n=e/this.innerWidth;this.offset(n),this.triggerPercent()}},watch:{precent:function(){this.precent>=0&&!this.touchStatus&&this.offset(this.precent)}}}),$=I,T=(n("cf5b"),Object(a["a"])($,x,_,!1,null,"4f0b7b3c",null)),M=T.exports,O=n("3ce5"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"playlist",on:{click:t.hide}},[n("div",{staticClass:"playlist_wrap",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"playlist_header"},[t._v(" 当前播放( "+t._s(t.playList.length)+" ) ")]),n("div",{staticClass:"playlist_operator"},[n("div",{staticClass:"playlist_mode",on:{click:t.changeMode}},[n("i",{class:t.iconMode}),t._v(" "+t._s(t.modeText)+" ")]),n("div",{staticClass:"playlist_clear",on:{click:t.showConfirm}},[n("i",{staticClass:"icon-clear"})])]),n("div",{staticClass:"scroll"},[n("scroll",{ref:"scroll",staticClass:"playlist_item",attrs:{list:t.playList}},[n("div",t._l(t.playList,(function(e,i){return n("div",{key:e.id,staticClass:"item",on:{click:function(e){return t.changeSong(i)}}},[n("span",{staticClass:"item_name"},[n("span",{staticClass:"current",class:e.mid===t.currentSong.mid?"icon-play":""}),n("span",{staticClass:"name"},[t._v(t._s(e.name))])]),n("span",{staticClass:"item_operator"},[n("i",{class:t.getFavoriteIcon(e),on:{click:function(n){return n.stopPropagation(),t.toggleFavorite(e)}}}),n("i",{staticClass:"icon-delete",on:{click:function(e){return e.stopPropagation(),t.deleteOne(i)}}})])])})),0)])],1)]),n("div",{staticClass:"close",on:{click:t.hide}},[t._v(" 关闭 ")]),n("confirm",{ref:"confirm",attrs:{text:"是否清空列表",confirmBtnText:"清空"},on:{confirm:t.clearSearchHistory}})],1)])},j=[],F=(n("a434"),n("a32c")),N=n("510f"),E={mixins:[N["c"]],components:{scroll:O["a"],Confirm:F["a"]},data:function(){return{showFlag:!1,playMode:{sequence:0,loop:1,random:2}}},computed:Object(S["a"])(Object(S["a"])({},Object(L["b"])({currentSong:"currentSong",playList:"playList",mode:"mode",currentIndex:"currentIndex"})),{},{iconMode:function(){return this.mode===this.playMode.sequence?"icon-sequence":this.mode===this.playMode.loop?"icon-loop":"icon-random"},modeText:function(){return this.mode===this.playMode.sequence?"顺序播放":this.mode===this.playMode.random?"随机播放":"单曲循环"}}),methods:{show:function(){var t=this;this.showFlag=!0,setTimeout((function(){t.$refs.scroll.refresh()}),20)},hide:function(){this.showFlag=!1},deleteOne:function(t){this.playList.splice(t,1),t<this.currentIndex&&this.$store.commit("setCurrentIndex",this.currentIndex-1),t==this.playList.length&&this.$store.commit("setCurrentIndex",0),0==this.playList.length&&(this.$router.back(),this.deleteAll()),this.$store.commit("setPlayList",this.playList),this.$store.commit("setSequenceList",this.playList)},deleteAll:function(){this.hide(),this.$store.commit("setPlayList",[]),this.$store.commit("setCurrentIndex",-1),this.$store.commit("setSequenceList",[]),this.$store.commit("setPlaying",!1)},changeSong:function(t){this.$store.commit("setCurrentIndex",t)},changeMode:function(){this.$emit("changeMode")},showConfirm:function(){this.$refs.confirm.show()},clearSearchHistory:function(){this.deleteAll()}},watch:{playList:function(){this.$refs.scroll.refresh()}}},q=E,A=(n("0566"),Object(a["a"])(q,P,j,!1,null,"32b573e0",null)),R=A.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toast"},[t._v(" "+t._s(t.title)+" ")])},B=[],D={props:{title:{type:String,default:""}}},W=D,X=(n("2165"),Object(a["a"])(W,J,B,!1,null,"e1f01be4",null)),H=X.exports,Y={mixins:[N["c"]],data:function(){return{audioSrc:"",songReady:!1,playMode:{sequence:0,loop:1,random:2},currentTime:0,currentLyric:null,currentLineNum:0,playingLyric:"",currentShow:"cd",touch:{}}},computed:Object(S["a"])(Object(S["a"])({},Object(L["b"])({fullScreen:"fullScreen",playList:"playList",currentSong:"currentSong",playing:"playing",currentIndex:"currentIndex",mode:"mode",sequenceList:"sequenceList",historyPlay:"historyPlay",loveMusic:"loveMusic"})),{},{imgsrc:function(){return"{}"==JSON.stringify(this.currentSong)?"":"https://y.gtimg.cn/music/photo_new/T002R300x300M000".concat(this.currentSong.album.mid,".jpg")},playIcon:function(){return this.playing?"icon-pause":"icon-play"},miniIcon:function(){return this.playing?"icon-pause-mini":"icon-play-mini"},rorate:function(){return this.playing?"play":"play pause"},iconMode:function(){return this.mode===this.playMode.sequence?"icon-sequence":this.mode===this.playMode.loop?"icon-loop":"icon-random"},disabledCls:function(){return this.songReady?"":"disable"},precent:function(){return this.currentTime/this.currentSong.interval}}),methods:{back:function(t){this.$store.commit("setFullScreen",t)},fetchAudioSrc:function(t){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.audioSrc="",n.next=3,e.$http.get("/api/song/urls?id="+t);case 3:i=n.sent,s=i.data,JSON.stringify(s.data)=={}?e.audioSrc="":e.audioSrc=s.data[t],void 0==e.audioSrc&&(clearTimeout(e.timeAudio),e.timeAudio=setTimeout((function(){e.changeIndex(1)}),3e3));case 7:case"end":return n.stop()}}),n)})))()},fetchLyric:function(t){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.get("/api/lyric?songmid="+t);case 2:i=n.sent,s=i.data,100==s.result?(e.currentLyric=new w.a(s.data.lyric,e.handleLyric),e.currentLyric.play()):(e.currentLyric=null,e.playingLyric="",e.currentLineNum=0);case 5:case"end":return n.stop()}}),n)})))()},handleLyric:function(t){var e=t.lineNum,n=t.txt;if(this.currentLineNum=e,e>5){var i=this.$refs.lyricLine[e-5];this.$refs.lyricList.scrollToElement(i,1e3)}else this.$refs.lyricList.scrollTo(0,0,1e3);this.playingLyric=n},ready:function(){this.songReady=!0,this.$store.commit("setPlaying",!0),this.$refs.audio.play()},error:function(){this.songReady=!1},changePlaying:function(){this.songReady&&(this.playing?this.$store.commit("setPlaying",!1):this.$store.commit("setPlaying",!0),this.currentLyric&&this.currentLyric.togglePlay())},changeIndex:function(t){if(1===this.playList.length)this.loop();else{var e=this.currentIndex+t;e<0&&(e=this.playList.length-1),e==this.playList.length&&(e=0),this.$store.commit("setCurrentIndex",e)}},end:function(){this.mode===this.playMode.loop?this.loop():this.changeIndex(1)},changeMode:function(){var t=(this.mode+1)%3;this.$store.commit("setMode",t);var e=null;t==this.playMode.random?(this.shuffle(this.sequenceList),e=this.sequenceList):e=this.sequenceList,this.resetCurrentIndex(e),this.$store.commit("setPlayList",e)},loop:function(){this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.currentLyric&&this.currentLyric.seek(0)},shuffle:function(t){var e=t.length;while(e){var n=Math.floor(Math.random()*e--),i=[t[e],t[n]];t[n]=i[0],t[e]=i[1]}return t},updateTime:function(t){this.currentTime=t.target.currentTime},forMat:function(t){t|=0;var e=t/60|0,n=t%60|0;return n<10?"".concat(e,":0").concat(n):"".concat(e,":").concat(n)},precentChange:function(t){var e=this.currentSong.interval*t;this.$refs.audio.currentTime=e,this.currentLyric&&this.currentLyric.seek(1e3*e)},middleTouchStart:function(t){this.touch.initiated=!0;var e=t.touches[0];this.touch.startX=e.pageX,this.touch.startY=e.pageY},middleTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0],n=e.pageX-this.touch.startX,i=e.pageY-this.touch.startY;if(!(Math.abs(i)>Math.abs(n))){var s=n;s<-80?(this.$refs.lyricList.$el.style.left="0",this.$refs.middleL.style.opacity="".concat(s/window.innerWidth),this.currentShow="lyric"):s>80&&(this.$refs.lyricList.$el.style.left="100%",this.$refs.middleL.style.opacity="1",this.currentShow="cd")}}},middleTouchEnd:function(){this.touch.initiated=!1},showPlaylist:function(){this.$refs.playList.show()}},watch:{currentSong:function(){var t=this;void 0!=this.currentSong?(this.fetchAudioSrc(this.currentSong.mid),this.currentLyric&&(this.currentLyric.stop(),this.currentLyric=null,this.playingLyric="",this.currentLineNum=0),clearTimeout(this.timer),this.timer=setTimeout((function(){t.fetchLyric(t.currentSong.mid)}),1e3),this.local(this.historyPlay,"historyPlay")):this.$store.commit("setCurrentSong",{})},playing:function(){var t=this.$refs.audio;this.playing?t.play():t.pause()}},components:{progressBar:M,scroll:O["a"],playList:R,Toast:H}},U=Y,K=(n("53b9"),Object(a["a"])(U,y,b,!1,null,"673de29e",null)),Q=K.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.songItem.mid,expression:"songItem.mid"}],staticClass:"operator",on:{click:t.hide}},[n("div",{staticClass:"operator_wrap",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"operator_header"},[n("img",{attrs:{src:t.imgsrc,alt:""}}),n("div",{staticClass:"title"},[n("p",{staticClass:"name"},[t._v("歌曲："+t._s(t.songItem.name))]),n("p",{staticClass:"text"},t._l(t.songItem.singer,(function(e){return n("span",{key:e.id},[t._v(t._s(e.name))])})),0)])]),n("div",{staticClass:"select"},[n("ul",[n("li",[n("i",{staticClass:"icon-play"}),n("span",{on:{click:function(e){return t.next()}}},[t._v("下一首播放")])]),n("li",{on:{click:function(e){return t.toggleFavorite(t.songItem)}}},[n("i",{class:t.getFavoriteIcon(t.songItem)}),n("span",[t._v("添加到我喜欢")])]),n("li",{on:{click:function(e){return t.getComment(t.songItem)}}},[n("i",{staticClass:"icon-add"}),n("span",[t._v("获取评论")])])])])]),n("div",{staticClass:"close",on:{click:t.hide}},[t._v(" 关闭 ")])])])},z=[],G=(n("c740"),{mixins:[N["c"]],computed:Object(S["a"])(Object(S["a"])({},Object(L["b"])({songItem:"songItem",playList:"playList",sequenceList:"sequenceList",currentIndex:"currentIndex"})),{},{imgsrc:function(){return"{}"==JSON.stringify(this.songItem)?"":"https://y.gtimg.cn/music/photo_new/T002R300x300M000".concat(this.songItem.album.mid,".jpg")}}),methods:{hide:function(){this.$store.commit("setSongItem",{})},next:function(){var t=this;if(-1==this.currentIndex)this.playList.push(this.songItem);else{var e=this.playList.findIndex((function(e){return e.mid===t.songItem.mid}));e>-1&&this.playList.splice(e,1),this.playList.splice(this.currentIndex+1,0,this.songItem)}this.$store.commit("setPlayList",this.playList),this.$store.commit("setSequenceList",this.playList),1==this.playList.length&&this.$store.commit("setCurrentIndex",0)},getComment:function(t){this.hide();var e=void 0==t.id?t.songid:t.id;this.$router.push("/comment/"+e)}}}),Z=G,tt=(n("c5d3"),Object(a["a"])(Z,V,z,!1,null,"707e0478",null)),et=tt.exports,nt={components:{MHeader:h,Tab:v,player:Q,OperatorSong:et},data:function(){return{tabList:[{id:1,name:"推荐",router:"/recommend"},{id:2,name:"歌手",router:"/singer"},{id:3,name:"排行",router:"/rank"}]}}},it=nt,st=Object(a["a"])(it,s,r,!1,null,null,null),rt=st.exports,ct=(n("d3b7"),n("8c4f"));i["default"].use(ct["a"]);var ot=[{path:"/",redirect:"/recommend"},{path:"/recommend",name:"recommend",component:function(){return n.e("chunk-31efb0a7").then(n.bind(null,"72c9"))}},{path:"/singer",name:"singer",component:function(){return n.e("chunk-67e3a02c").then(n.bind(null,"2b27"))}},{path:"/rank",name:"rank",component:function(){return n.e("chunk-007026d1").then(n.bind(null,"0e05"))}},{path:"/singer/:mid",name:"singerDetail",component:function(){return n.e("chunk-1fc65073").then(n.bind(null,"03a2"))}},{path:"/mine",name:"mine",component:function(){return n.e("chunk-832019e8").then(n.bind(null,"3adc"))}},{path:"/search",name:"search",component:function(){return n.e("chunk-0fc8b986").then(n.bind(null,"794b"))}},{path:"/songList/:id",name:"SongListDetail",component:function(){return n.e("chunk-dc5fb71c").then(n.bind(null,"a58f"))}},{path:"/album/:id",name:"AlbunDetail",component:function(){return n.e("chunk-48c30067").then(n.bind(null,"1f01"))}},{path:"/rank/:id",name:"RankDetail",component:function(){return n.e("chunk-50f4847d").then(n.bind(null,"d3a0"))}},{path:"/search/:query",name:"searchQuery",component:function(){return n.e("chunk-c6f7861e").then(n.bind(null,"84a9"))}},{path:"/mine/love",name:"mineLove",component:function(){return n.e("chunk-9f2101fc").then(n.bind(null,"cdde"))}},{path:"/mine/history",name:"mineHistory",component:function(){return n.e("chunk-9f2101fc").then(n.bind(null,"cdde"))}},{path:"/mine/singer",name:"mineSinger",component:function(){return n.e("chunk-ff0ae78a").then(n.bind(null,"60ad"))}},{path:"/mine/songList",name:"mineSongList",component:function(){return n.e("chunk-9a08225a").then(n.bind(null,"b63c"))}},{path:"/mine/album",name:"mineAlbum",component:function(){return n.e("chunk-9a08225a").then(n.bind(null,"b63c"))}},{path:"/mine/rank",name:"mineRank",component:function(){return n.e("chunk-26d56c53").then(n.bind(null,"9599"))}},{path:"/comment/:id",name:"comment",component:function(){return n.e("chunk-0cedad30").then(n.bind(null,"67f1"))}}],at=new ct["a"]({routes:ot}),lt=at;i["default"].use(L["a"]);var ut=new L["a"].Store({state:{singer:{},songList:{},album:{},rank:{},playing:!1,fullScreen:!1,playList:[],sequenceList:[],mode:0,currentIndex:-1,currentSong:{},historyPlay:JSON.parse(localStorage.getItem("historyPlay"))||[],loveSinger:JSON.parse(localStorage.getItem("loveSinger"))||[],loveAlbum:JSON.parse(localStorage.getItem("loveAlbum"))||[],loveSongList:JSON.parse(localStorage.getItem("loveSongList"))||[],loveMusic:JSON.parse(localStorage.getItem("loveMusic"))||[],loveRank:JSON.parse(localStorage.getItem("loveRank"))||[],value:"",songItem:{}},mutations:{setSinger:function(t,e){t.singer=e},setSongList:function(t,e){t.songList=e},setAlbum:function(t,e){t.album=e},setRank:function(t,e){t.rank=e},setFullScreen:function(t,e){t.fullScreen=e},setPlaying:function(t,e){t.playing=e},setSequenceList:function(t,e){t.sequenceList=e},setPlayList:function(t,e){t.playList=e,t.currentSong=t.playList[t.currentIndex]},setCurrentSong:function(t,e){t.currentSong=e},setCurrentIndex:function(t,e){t.currentIndex=e,t.currentSong=t.playList[t.currentIndex]},setMode:function(t,e){t.mode=e},setValue:function(t,e){t.value=e},setSongItem:function(t,e){t.songItem=e}},actions:{},modules:{}}),ht=(n("f867"),n("bc3a")),dt=n.n(ht),ft=n("caf9");i["default"].prototype.$http=dt.a,i["default"].use(ft["a"],{loading:n("113c")}),i["default"].config.productionTip=!1,new i["default"]({router:lt,store:ut,render:function(t){return t(rt)}}).$mount("#app")},"63bf":function(t,e,n){},a32c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"confirm-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"confirm",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"confirm-wrapper"},[n("div",{staticClass:"confirm-content"},[n("p",{staticClass:"text"},[t._v(t._s(t.text))]),n("div",{staticClass:"operate"},[n("div",{staticClass:"operate-btn left",on:{click:t.cancel}},[t._v(t._s(t.cancelBtnText))]),n("div",{staticClass:"operate-btn",on:{click:t.confirm}},[t._v(t._s(t.confirmBtnText))])])])])])])},s=[],r={props:{text:{type:String,default:""},confirmBtnText:{type:String,default:"确定"},cancelBtnText:{type:String,default:"取消"}},data:function(){return{showFlag:!1}},methods:{show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1},cancel:function(){this.hide(),this.$emit("cancel")},confirm:function(){this.hide(),this.$emit("confirm")}}},c=r,o=(n("fb26"),n("2877")),a=Object(o["a"])(c,i,s,!1,null,"1094e9a6",null);e["a"]=a.exports},adc4:function(t,e,n){"use strict";var i=n("ef95"),s=n.n(i);s.a},b106:function(t,e,n){},c0cd:function(t,e,n){"use strict";var i=n("b106"),s=n.n(i);s.a},c2ea:function(t,e,n){},c5d3:function(t,e,n){"use strict";var i=n("2c1c"),s=n.n(i);s.a},cf5b:function(t,e,n){"use strict";var i=n("63bf"),s=n.n(i);s.a},e20b:function(t,e,n){},ef95:function(t,e,n){},f867:function(t,e,n){},fb26:function(t,e,n){"use strict";var i=n("e20b"),s=n.n(i);s.a}});
//# sourceMappingURL=app.e0b74cb5.js.map